<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Prakash Netra - Admin Portal</title>
<style>
  *{margin:0;padding:0;box-sizing:border-box}
  body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:linear-gradient(135deg,#e2e8f0 0%,#cbd5e0 100%);min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px}
  .login-container{background:white;border-radius:8px;box-shadow:0 4px 6px rgba(0,0,0,0.1);padding:40px;width:100%;max-width:440px;position:relative}
  .header{text-align:center;margin-bottom:32px}
  .header h1{font-size:24px;font-weight:600;color:#1a202c;margin-bottom:8px}
  .header p{color:#718096;font-size:14px;line-height:1.4}
  .form-group{margin-bottom:20px}
  .form-group label{display:block;font-weight:500;color:#2d3748;margin-bottom:6px;font-size:14px}
  .required{color:#e53e3e}
  .form-input{width:100%;padding:12px 16px;border:2px solid #e2e8f0;border-radius:8px;font-size:14px;color:#2d3748;transition:all 0.2s ease}
  .form-input:focus{outline:none;border-color:#3182ce;box-shadow:0 0 0 3px rgba(49,130,206,0.1)}
  .form-input::placeholder{color:#a0aec0}
  .form-hint{font-size:12px;color:#718096;margin-top:4px;line-height:1.3}
  .forgot-password{text-align:right;margin-bottom:24px}
  .forgot-password a{color:#3182ce;text-decoration:none;font-size:13px;font-weight:500;transition:color 0.2s ease}
  .forgot-password a:hover{color:#2c5aa0;text-decoration:underline}
  .login-button{width:100%;background:linear-gradient(135deg,#4299e1 0%,#3182ce 100%);color:white;border:none;padding:14px 16px;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all 0.2s ease;margin-bottom:12px;box-shadow:0 2px 4px rgba(49,130,206,0.2)}
  .login-button:hover{background:linear-gradient(135deg,#3182ce 0%,#2c5aa0 100%);transform:translateY(-1px);box-shadow:0 4px 8px rgba(49,130,206,0.3)}
  .clear-button{width:100%;background:transparent;color:#718096;border:2px solid #e2e8f0;padding:12px 16px;border-radius:8px;font-size:14px;font-weight:700;cursor:pointer;transition:all 0.2s ease;margin-bottom:24px}
  .clear-button:hover{background:#f7fafc;border-color:#cbd5e0;color:#4a5568}
  .login-link{text-align:center;margin-top:20px}
  .login-link a{color:#3182ce;text-decoration:none;font-size:14px;font-weight:500}
  .login-link a:hover{color:#2c5aa0;text-decoration:underline}
</style>
</head>
<body>
<div class="login-container">
  <div class="header">
    <h1>Prakash Netra - Admin Portal</h1>
    <p>Access your government portal account</p>
  </div>

  <form id="loginForm" onsubmit="handleLogin(event)">
    <div class="form-group">
      <label for="email">Email Address <span class="required">*</span></label>
      <input type="email" id="email" name="email" class="form-input" placeholder="your.email@example.com" required>
    </div>

    <div class="form-group">
      <label for="password">Password <span class="required">*</span></label>
      <input type="password" id="password" name="password" class="form-input" placeholder="••••••" required minlength="8">
      <div class="form-hint">Password must be at least 8 characters long</div>
    </div>

    <div class="forgot-password">
      <a href="reset-password.html">Forgot your password?</a>
    </div>

    <button type="submit" class="login-button">Login / Sign In</button>
    <button type="button" class="clear-button" onclick="clearForm()">Reset / Clear Form</button>
  </form>

  <div class="login-link">
    <a href="register.html">Don't have an account? Register here</a>
  </div>
</div>

<script>
  function handleLogin(event) {
    event.preventDefault();

    const email = document.getElementById('email').value.trim();
    const password = document.getElementById('password').value.trim();

    if (!email || !password) {
      alert('Please fill in all required fields');
      return;
    }

    if (password.length < 8) {
      alert('Password must be at least 8 characters long. Please try again.');
      document.getElementById('password').value = '';
      document.getElementById('password').focus();
      return;
    }

    // ✅ Fetch all stored users from localStorage
    const allUsers = JSON.parse(localStorage.getItem("users")) || [];

    // ✅ Check if email & password match
    const user = allUsers.find(u => u.email === email && u.password === password);

    if (user) {
      alert(`Login successful for: ${email}`);
      localStorage.setItem("isLoggedIn", "true");      // session flag
      localStorage.setItem("loggedInUser", email);     // track logged-in user
      window.location.href = "dashboard.html";         // redirect to dashboard
    } else {
      alert("Invalid email or password. Please try again.");
      document.getElementById('password').value = '';
      document.getElementById('password').focus();
    }
  }

  function clearForm() {
    document.getElementById('email').value = '';
    document.getElementById('password').value = '';
    console.log('Form cleared');
  }
</script>

</body>
</html>
